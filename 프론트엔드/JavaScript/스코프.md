# ìŠ¤ì½”í”„(Scope)

- ì´ë¦„ì´ ì¤‘ë³µëœ 2ê°œì˜ ë³€ìˆ˜ ì¤‘ ì–´ë–¤ ë³€ìˆ˜ë¥¼ ì°¸ì¡°? ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ì–´ë–»ê²Œ ë³€ìˆ˜ë¥¼ ì‹ë³„?
- ë²”ìœ„ => ë³€ìˆ˜ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ë²”ìœ„

- ì°¸ì¡° ëŒ€ìƒ **ì‹ë³„ì** (ë³€ìˆ˜, í•¨ìˆ˜ì˜ ì´ë¦„ê³¼ ê°™ì´ ë‹¤ë¥¸ ëŒ€ìƒê³¼ êµ¬ë¶„í•˜ì—¬ ì‹ë³„í•  ìˆ˜ ìˆëŠ” ìœ ì¼í•œ ì´ë¦„)**ë¥¼ ì°¾ì•„ë‚´ê¸° ìœ„í•œ ê·œì¹™**

- ì˜ˆì‹œ

  ```javascript
  var x = 'global';
  
  function foo () {
    var x = 'function scope';
    console.log(x);
  }
  
  foo(); // ?
  console.log(x); // ?
  ```

  ì „ì—­ì— ì„ ì–¸ëœ ë³€ìˆ˜ xëŠ” ì–´ë””ì—ë“  ì°¸ì¡° ê°€ëŠ¥. But í•¨ìˆ˜ foo ë‚´ì—ì„œ ì„ ì–¸ë˜ë‹ˆ **ë³€ìˆ˜ xëŠ” í•¨ìˆ˜ foo ë‚´ë¶€ì—ì„œë§Œ** ì°¸ì¡°í•  ìˆ˜ ìˆê³ , ì™¸ë¶€ì—ì„œëŠ” ì°¸ì¡°í•  ìˆ˜ ì—†ë‹¤.
  => ì´ ê·œì¹™ì„ **ìŠ¤ì½”í”„** ë¼ê³  í•œë‹¤.

- íŠ¹ì§•

  - ë¸”ë¡ ë ˆë²¨ ìŠ¤ì½”í”„
  - í•¨ìˆ˜ ë ˆë²¨ ìŠ¤ì½”í”„
  - ë ‰ì‹œì»¬ ìŠ¤ì½”í”„
  - ë™ì  ìŠ¤ì½”í”„



## ë¸”ë¡ ë ˆë²¨ ìŠ¤ì½”í”„

- ì½”ë“œ ë¸”ë¡ (`{}`) ë‚´ì—ì„œë§Œ ì°¸ì¡°(ì ‘ê·¼)ê°€ëŠ¥í•œ ë²”ìœ„

```cpp
int main(void) {
  // block-level scope
  if (1) {
    int x = 5;
    printf("x = %d\n", x);
  }

  printf("x = %d\n", x); // use of undeclared identifier 'x'

  return 0;
}
```

if ë¬¸ ë‚´ì—ì„œ ì„ ì–¸ëœ ë³€ìˆ˜ x ëŠ” if ë¬¸ ì½”ë“œ ë¸”ë¡ ë‚´ì—ì„œë§Œ ìœ íš¨í•˜ë‹¤. ì¦‰, if ë¬¸ ì½”ë“œ ë¸”ë¡ ë°–ì—ì„œëŠ” ì°¸ì¡°ê°€ ë¶ˆê°€ëŠ¥í•˜ë‹¤.



## í•¨ìˆ˜ ë ˆë²¨ ìŠ¤ì½”í”„

- í•¨ìˆ˜ ì½”ë“œ ë¸”ë¡ ë‚´ì—ì„œë§Œ ì°¸ì¡°(ì ‘ê·¼) ê°€ëŠ¥í•œ ë²”ìœ„
- ES6 ì— ì¶”ê°€ëœ `let`ì„ ì‚¬ìš©í•˜ë©´ ë¸”ë¡ ë ˆë²¨ ìŠ¤ì½”í”„ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```javascript
var x = 0;
{
  var x = 1;
  console.log(x); // 1
}
console.log(x);   // 1

let y = 0;
{
  let y = 1;
  console.log(y); // 1
}
console.log(y);   // 0
```



## ë ‰ì‹œì»¬ ìŠ¤ì½”í”„

- ìŠ¤ì½”í”„ì˜ íŠ¹ì§• ì¤‘ì—ëŠ” ìƒìœ„ ìŠ¤ì½”í”„ë¥¼ ê²°ì •í•˜ëŠ” ë°©ë²•ì´ ìˆë‹¤.
- ìƒìœ„ ìŠ¤ì½”í”„ë¥¼ ê²°ì •í•˜ëŠ” ë°©ë²•ì—” 2 ê°€ì§€ê°€ ìˆë‹¤.
  - ë™ì  ìŠ¤ì½”í”„
    - Dynamic Scope
    - í•¨ìˆ˜ë¥¼ ì–´ë””ì„œ **í˜¸ì¶œ** í•˜ì˜€ëŠ”ì§€ì— ë”°ë¼ ìƒìœ„ ìŠ¤ì½”í”„ë¥¼ ê²°ì •
  - ë ‰ì‹œì»¬ ìŠ¤ì½”í”„
    - Lexical scope/Static scope
    - í•¨ìˆ˜ë¥¼ ì–´ë””ì„œ **ì„ ì–¸** í•˜ì˜€ëŠ”ì§€ì— ë”°ë¼ ìƒìœ„ ìŠ¤ì½”í”„ë¥¼ ê²°ì •
    - JavaScript ë° ëŒ€ë¶€ë¶„ì˜ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë°©ë²•
- ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ë ‰ì‹œì»¬ ìŠ¤ì½”í”„ë¥¼ ë”°ë¥´ë¯€ë¡œ **í•¨ìˆ˜ë¥¼ ì„ ì–¸í•œ ì‹œì ì— ìƒìœ„ ìŠ¤ì½”í”„ê°€ ê²°ì •**ëœë‹¤.
  í•¨ìˆ˜ë¥¼ ì–´ë””ì—ì„œ í˜¸ì¶œí•˜ì˜€ëŠ”ì§€ëŠ” ìŠ¤ì½”í”„ ê²°ì •ì— ì•„ë¬´ëŸ° ì˜ë¯¸ë¥¼ ì£¼ì§€ ì•ŠëŠ”ë‹¤.

```javascript
var x = 1;

function foo() {
  var x = 10;
  bar();
}

function bar() {
  console.log(x);
}

foo(); // ?
bar(); // ?
```

í•¨ìˆ˜ barëŠ” ì „ì—­ì— ì„ ì–¸ë˜ì—ˆë‹¤. 

=> í•¨ìˆ˜ barì˜ ìƒìœ„ ìŠ¤ì½”í”„ëŠ” ì „ì—­ ìŠ¤ì½”í”„ì´ê³  ìœ„ ì˜ˆì œëŠ” ì „ì—­ ë³€ìˆ˜ì˜ xì˜ ê°’ 1 ì„ ë‘ë²ˆ ì¶œë ¥í•œë‹¤.



## ìŠ¤ì½”í”„ì˜ ì¢…ë¥˜

- ì „ì—­ ìŠ¤ì½”í”„

  - Global scope
  - ì½”ë“œ ì–´ë””ì—ì„œë“ ì§€ ì°¸ì¡° ê°€ëŠ¥

- ì§€ì—­ ìŠ¤ì½”í”„

  - Local scope / Function-level scope
  - í•¨ìˆ˜ ì½”ë“œ ë¸”ë¡ì´ ë§Œë“  ìŠ¤ì½”í”„ë¡œ, í•¨ìˆ˜ ìì‹ ê³¼ í•˜ìœ„ í•¨ìˆ˜ì—ì„œë§Œ ì°¸ì¡°í•  ìˆ˜ ìˆë‹¤.

  

ëª¨ë“  ë³€ìˆ˜ëŠ” ìŠ¤ì½”í”„ë¥¼ ê°–ëŠ”ë‹¤. **ë³€ìˆ˜ ê´€ì **ì—ì„œ ìŠ¤ì½”í”„ë¥¼ êµ¬ë¶„í•˜ë©´

- ì „ì—­ ë³€ìˆ˜
  - Global variable
  - ì „ì—­ì—ì„œ ì„ ì–¸ëœ ë³€ìˆ˜ì´ë©° ì–´ë””ì—ë“  ì°¸ì¡°í•  ìˆ˜ ìˆë‹¤
- ì§€ì—­ ë³€ìˆ˜
  - Local variable
  - ì§€ì—­(í•¨ìˆ˜) ë‚´ì—ì„œ ì„ ì–¸ëœ ë³€ìˆ˜ì´ë©° ê·¸ ì§€ì—­ê³¼ ê·¸ ì§€ì—­ì˜ í•˜ë¶€ ì§€ì—­ì—ì„œë§Œ ì°¸ì¡°í•  ìˆ˜ ìˆë‹¤.



### ì „ì—­ ìŠ¤ì½”í”„

- ì „ì—­ì— ë³€ìˆ˜ë¥¼ ì„ ì–¸í•˜ë©´ ì´ ë³€ìˆ˜ëŠ” ì–´ë””ì„œë“ ì§€ ì°¸ì¡°í•  ìˆ˜ ìˆëŠ” ì „ì—­ ìŠ¤ì½”í”„ë¥¼ ê°–ëŠ” ë³€ìˆ˜ê°€ ëœë‹¤.

- `var` í‚¤ì›Œë“œë¡œ ì„ ì–¸í•œ ì „ì—­ ë³€ìˆ˜ëŠ” ì „ì—­ ê°ì²´(Global Object) `window`ì˜ í”„ë¡œí¼í‹°

- #### ğŸš¨ ì£¼ì˜

  ì „ì—­ë³€ìˆ˜ì˜ ì‚¬ìš©ì€ ë³€ìˆ˜ ì´ë¦„ì´ ì¤‘ë³µë  ìˆ˜ ìˆê³ ,
  ì˜ë„ì¹˜ ì•Šì€ ì¬í• ë‹¹ì— ì˜í•œ ìƒíƒœ ë³€í™”ë¡œ ì½”ë“œë¥¼ ì˜ˆì¸¡í•˜ê¸° ì–´ë µê²Œ ë§Œë“œë¯€ë¡œ ì‚¬ìš©ì„ ì–µì œí•´ì•¼ í•œë‹¤.

  - **ì „ì—­ë³€ìˆ˜ë¥¼ ìµœì†Œí•œìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë°©ë²•**

    - ì „ì—­ ë³€ìˆ˜ ê°ì²´ë¥¼ í•˜ë‚˜ ë§Œë“¤ì–´ ì‚¬ìš©

      ```javascript
      var MYAPP = {};
      
      MYAPP.student = {
        name: 'Lee',
        gender: 'male'
      };
      
      console.log(MYAPP.student.name);
      ```

    - ì¦‰ì‹œì‹¤í–‰í•¨ìˆ˜(IIFE, Immediately-Invoked Function Expression)ë¥¼ ì‚¬ìš©

      ì´ ë°©ë²•ì„ ì‚¬ìš©í•˜ë©´ ì „ì—­ ë³€ìˆ˜ë¥¼ ë§Œë“¤ì§€ ì•Šìœ¼ë¯€ë¡œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë“±ì— ìì£¼ ì‚¬ìš©ëœë‹¤.
      ì¦‰ì‹œ ì‹¤í–‰í•¨ìˆ˜ëŠ” ì¦‰ì‹œ ì‹¤í–‰ë˜ê³ , ê·¸ í›„ ì „ì—­ì—ì„œ ë°”ë¡œ ì‚¬ë¼ì§„ë‹¤.

      ```javascript
      (function () {
        var MYAPP = {};
      
        MYAPP.student = {
          name: 'Lee',
          gender: 'male'
        };
      
        console.log(MYAPP.student.name);
      }());
      
      console.log(MYAPP.student.name);
      ```



### ë¹„ ë¸”ë¡ ìŠ¤ì½”í”„

- ì „ì—­ ìŠ¤ì½”í”„ ì¤‘ í•˜ë‚˜

  í•¨ìˆ˜ ë°–ì— ì„ ì–¸ëœ ë³€ìˆ˜ëŠ” ì½”ë“œ ë¸”ë¡ ë‚´ì—ì„œ ì„ ì–¸ëì„ ì§€ë¼ë„ JavaScript ì—ì„  ëª¨ë‘ ì „ì—­ ìŠ¤ì½”í”„ë¥¼ ê°–ëŠ”ë‹¤.

  ```javascript
  if (true) {
    var x = 5;
  }
  console.log(x);
  ```

  

### ì•”ë¬µì  ì „ì—­

- ì„ ì–¸í•˜ì§€ ì•Šì€ ì‹ë³„ìë¥¼ ì „ì—­ë³€ìˆ˜ë¡œ ì·¨ê¸‰

  ```javascript
  // ì „ì—­ë³€ìˆ˜ xëŠ” í˜¸ì´ìŠ¤íŒ…ì´ ë°œìƒí•œë‹¤. 
  console.log(x);   // undefined
  // ì „ì—­ê°ì²´ì˜ í”„ë¡œí¼í‹°ì¸ yëŠ” í˜¸ì´ìŠ¤íŒ…ì´ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤.
  console.log(y);   // ReferenceError
  var x = 10; // ì „ì—­ ë³€ìˆ˜
  
  function foo () {
    // ì„ ì–¸í•˜ì§€ ì•Šì€ ì‹ë³„ì
    // ì„ ì–¸í•˜ì§€ ì•Šì€ ì‹ë³„ìì— ê°’ì„ í• ë‹¹í•˜ë©´ ì „ì—­ ê°ì²´ì˜ í”„ë¡œí¼í‹°ê°€ ë˜ì–´ ì „ì—­ ë³€ìˆ˜ì²˜ëŸ¼ ë™ì‘í•œë‹¤
    y = 20;
    console.log(x + y);
  }
  
  // foo í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ë©´ 
  // ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì€ y = 20ì„ window.y = 20ìœ¼ë¡œ í•´ì„í•˜ì—¬ í”„ë¡œí¼í‹°ë¥¼ ë™ì  ìƒì„±í•œë‹¤
  // ì´ëŸ¬í•œ í˜„ìƒì„ ì•”ë¬µì  ì „ì—­ì´ë¼ê³  í•œë‹¤
  foo(); // 30
  
  // ì„ ì–¸í•˜ì§€ ì•Šì€ ì‹ë³„ì yë¥¼ ì „ì—­ì—ì„œ ì°¸ì¡°ê°€ëŠ¥í•¨  
  console.log(x + y); // 30
  
  console.log(window.x); // 10
  console.log(window.y); // 20
  
  delete x; // ì „ì—­ë³€ìˆ˜ëŠ” ì‚­ì œë˜ì§€ ì•ŠìŒ
  delete y; // í”„ë¡œí¼í‹°ëŠ” ì‚­ì œë¨
  
  console.log(window.x); // 10
  console.log(window.y); // undefined
  ```

  foo í•¨ìˆ˜ ë‚´ yëŠ” ì„ ì–¸í•˜ì§€ ì•Šì€ ì‹ë³„ì. 

  ê·¸ë˜ì„œ y = 20ì´ ì‹¤í–‰ë˜ë©´ ì°¸ì¡°ì—ëŸ¬ê°€ ë°œìƒí•  ê²ƒì²˜ëŸ¼ ë³´ì´ì§€ë§Œ ì‹ë³„ì yëŠ” ë§ˆì¹˜ ì„ ì–¸ëœ ì „ì—­ë³€ìˆ˜ì²˜ëŸ¼ ë™ì‘í•œë‹¤.

  **ì„ ì–¸í•˜ì§€ ì•Šì€ ì‹ë³„ìì— ê°’ì„ í• ë‹¹í•˜ë©´ ì „ì—­ ê°ì²´ì˜ í”„ë¡œí¼í‹°**ê°€ ë˜ê¸° ë•Œë¬¸.

  ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì€ `y=20`ì„ `window.y=20`ìœ¼ë¡œ í•´ì„í•˜ì—¬ ì „ì—­ ê°ì²´ì— í”„ë¡œí¼í‹°ë¥¼ ë™ì  ìƒì„±í•œë‹¤. 

  > `ë™ì  ìƒì„±` : í”„ë¡œê·¸ë¨ì´ ì‹œì‘í•  ë•Œ ê°ì²´ë¥¼ ë¯¸ë¦¬ ìƒì„±í•´ë‘ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ê·¸ ê°ì²´ë¥¼ í•„ìš”ë¡œ í•˜ëŠ” ìˆœê°„ì— ë°”ë¡œ ìƒì„±í•œë‹¤.

  yëŠ” **ì „ì—­ê°ì²´ì˜ í”„ë¡œí¼í‹°**ê°€ ë˜ì–´ **ë§ˆì¹˜ ì „ì—­ë³€ìˆ˜ì²˜ëŸ¼ ë™ì‘**í•œë‹¤. => ì´ëŸ° í˜„ìƒì„ **ì•”ë¬µì  ì „ì—­** ì´ë¼ê³  í•œë‹¤. 

  í•˜ì§€ë§Œ yëŠ” **ë³€ìˆ˜ ì„ ì–¸ ì—†ì´** ë‹¨ì§€ ì „ì—­ ê°ì²´ì˜ í”„ë¡œí¼í‹°ë¡œ ì¶”ê°€ë˜ì—ˆì„ ë¿ì´ë‹¤.
  ë”°ë¼ì„œ **yëŠ” ë³€ìˆ˜ê°€ ì•„ë‹ˆë‹¤**. ë³€ìˆ˜ê°€ ì•„ë‹Œ yëŠ” **ë³€ìˆ˜ í˜¸ì´ìŠ¤íŒ…ì´ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤**.

  ë˜í•œ ë³€ìˆ˜ê°€ ì•„ë‹ˆë¼ **ë‹¨ì§€ í”„ë¡œí¼í‹°ì¸ yëŠ” deleteì—°ì‚°ìë¡œ ì‚­ì œê°€ëŠ¥**í•˜ì§€ë§Œ, **ì „ì—­ ë³€ìˆ˜ëŠ” deleteì—°ì‚°ìë¡œ ì‚­ì œí•  ìˆ˜ ì—†ë‹¤**.



## ìŠ¤ì½”í”„ ì²´ì¸

- ìœ íš¨ ë²”ìœ„ë¥¼ ë‚˜íƒ€ë‚´ëŠ” **ìŠ¤ì½”í”„ê°€ scope í”„ë¡œí¼í‹°ë¡œ ê° í•¨ìˆ˜ ê°ì²´ ë‚´ì—ì„œ ì—°ê²°ë¦¬ìŠ¤íŠ¸ í˜•ì‹ìœ¼ë¡œ ê´€ë¦¬**ë˜ëŠ”ë°,
  ì´ë•Œ **ìŠ¤ì½”í”„ ê°„ì˜ ìƒí•˜ê´€ê³„**

- ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ìƒì„± -> js ì—”ì§„ì€ í•´ë‹¹ ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì‹¤í–‰ì— í•„ìš”í•œ ì—¬ëŸ¬ê°€ì§€ ì •ë³´ë¥¼ ë‹´ì€ **í™œì„±ê°ì²´ ë¼ëŠ” ê°ì²´ë¥¼ ìƒì„±** -> ì´ í™œì„± ê°ì²´ì— í•¨ìˆ˜ì˜ ì¸ìë“¤ì„ **ìœ ì‚¬ ë°°ì—´ í˜•íƒœë¡œ ë‹´ëŠ” arguments ë¼ëŠ” ê°ì²´ê°€ ìƒì„±** -> í˜„ì¬ ì»¨í…ìŠ¤íŠ¸ì˜ ìœ íš¨ ë²”ìœ„ë¥¼ ë‚˜íƒ€ë‚´ëŠ” **ìŠ¤ì½”í”„ ì •ë³´ë¥¼ ìƒì„±** -> ì´ í›„ **ë³€ìˆ˜ ìƒì„±ê³¼ `this` ë°”ì¸ë”©**ì„ í•œë‹¤.

- ìŠ¤ì½”í”„ ì •ë³´ëŠ” í˜„ì¬ ì‹¤í–‰ì¤‘ì¸ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ì•ˆì—ì„œ ì—°ê²° ë¦¬ìŠ¤íŠ¸ì™€ ìœ ì‚¬í•œ í˜•ì‹ìœ¼ë¡œ ë§Œë“¤ì–´ì§„ë‹¤.

   => ì´ ë¦¬ìŠ¤íŠ¸ë¥¼ ìŠ¤ì½”í”„ ì²´ì¸ì´ë¼ê³  í•œë‹¤. scope í”„ë¡œí¼í‹°ë¡œ ì°¸ì¡°ëœë‹¤.



## ì§€ì—­ ìŠ¤ì½”í”„

- í•¨ìˆ˜ ë ˆë²¨ ìŠ¤ì½”í”„(Function-level Scope)
- í•¨ìˆ˜ ë‚´ì—ì„œ ì„ ì–¸ëœ ë§¤ê°œë³€ìˆ˜ì™€ ë³€ìˆ˜ëŠ” í•¨ìˆ˜ ì™¸ë¶€ì—ì„œëŠ” ìœ íš¨í•˜ì§€ ì•Šë‹¤.

```javascript
var a = 10;     // ì „ì—­ë³€ìˆ˜

(function () {
  var b = 20;   // ì§€ì—­ë³€ìˆ˜
})();

console.log(a); // 10
console.log(b); // "b" is not defined. bëŠ” ì§€ì—­ ë³€ìˆ˜ì´ë‹¤.
```



ì°¸ê³ )

https://velog.io/@party3205/JavaScript%EC%8A%A4%EC%BD%94%ED%94%84%EB%A5%BC-%EB%B0%B0%EC%9B%8C%EB%B3%B4%EC%9E%90

https://velog.io/@party3205/JavaScript%EC%8A%A4%EC%BD%94%ED%94%84%EB%A5%BC-%EB%B0%B0%EC%9B%8C%EB%B3%B4%EC%9E%90

https://eunhyejung.github.io/javascript/2021/09/08/JsStudy08.html