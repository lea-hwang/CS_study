## Q9. 메모리 단편화에 대해 설명해주세요.

**메모리 단편화**

 : RAM에서 메모리의 공간이 작은 조각으로 나뉘어져 **사용가능한 메모리가 충분히 존재하지만 할당(사용)이 불가능한 상태**를 보고 **메모리 단편화**가 발생했다고 한다.

- **내부 단편화(Internal Fragmentation)**

  : 메모리를 할당할 때 **프로세스가 필요한 양보다 더 큰 메모리가 할당되어서** 프로세스에서 사용하는 메모리 공간이 낭비 되는 상황

  ![img](https://mblogthumb-phinf.pstatic.net/20160211_133/rbdi3222_1455175332182MjpUA_JPEG/%B3%BB%BA%CE.JPG?type=w2)

  ![img](https://mblogthumb-phinf.pstatic.net/20160211_63/rbdi3222_1455175332562aT255_JPEG/%B3%BB%BA%CE%B4%DC%C6%ED%C8%AD.JPG?type=w2)

- **외부 단편화(External Fragmentation)**

메모리가 할당되고 해제되는 작업이 반복될 때 작은 메모리가 중간중간 존재하게 된다. 이 때 **중간중간에 생긴 사용하지 않는 메모리가 많이 존재해서 총 메모리 공간은 충분하지만 실제로 할당할 수 없는 상황**

![img](https://mblogthumb-phinf.pstatic.net/20160211_249/rbdi3222_1455175332786x4fI1_JPEG/%BF%DC%BA%CE%B4%DC%C6%ED%C8%AD.JPG?type=w2)



- 메모리 파편화 문제 해결 방법

  - **페이징(Paging)기법** - 가상메모리사용, 외부 단편화 해결, 내부 단편화 존재

    : 사용하지 않는 프레임을 페이지에 옮기고, 필요한 메모리를 페이지 단위로 프레임에 옮기는 기법.

    > 💡페이지
    >
    > 보조기억장치를 이용한 가상메모리를 같은 크기의 블록으로 나눈 것
    >
    > 💡프레임
    >
    > RAM을 페이지와 같은 크기로 나눈 것

    - 페이지와 프레임을 대응시키기 위해 page mapping과정이 필요해서 paging table을 만든다.

    - 페이징 기법을 사용하면 연속적이지 않은 공간도 활용할 수 있기 때문에 *외부 단편화 문제를 해결*할 수 있다.

    - 대신 페이지 단위에 알맞게 꽉채워 쓰는게 아니므로 내부 단편화 문제는 여전히 있다.

    - ❗페이지 단위를 작게하면 내부 단편화 문제도 해결할 수 있겠지만 대신 page mapping 과정이 많아지므로 오히려 효율이 떨어질 수 있다. 

  - **세그멘테이션(Segmentation)기법** - 가상메모리사용, 내부 단편화 해결, 외부 단편화 존재

    :  가상메모리를 서로 크기가 다른 논리적 단위인 세그먼트로 분할해서 메모리를 할당하는 기법

  - 세그먼트들의 크기가 다르기 때문에 미리 분할해 둘 수 없고 메모리에 적재될 때 빈 공간을 찾아 할당하는 기법

  - mapping을 위해 세그먼트 테이블이 필요

  - (각 세그먼트 항목별 세그먼트 시작주소와 세그먼트의 길이 정보를 가지고 있음)

  - ❗프로세스가 필요한 메모리 만큼 할당해주기 때문에 *내부단편화는 일어나지 않으나* 여전히 중간에 프로세스가 메모리를 해제하면 생기는 구멍, 즉 *외부 단편화 문제는 여전히 존재*

**참고자료**

https://jeong-pro.tistory.com/91

https://m.blog.naver.com/rbdi3222/220623825770


